using ServiceModel;
using ServiceStack;
using System;
using System.Collections.Generic;
using DTO = ServiceModel.DTO;
using System.Linq;
using ServiceStack.Text;
using System.IO;

namespace Server
{
  public class AdvertisementService : Service
  {

    static string json = "{\"totalCount\":11015,\"items\":[{\"id\":22016,\"idCompany\":2,\"code\":\"7f7acb4ee8354c03962ecf52b2f30be3\",\"created\":\"2016-11-03T15:02:32.1995870\",\"modified\":\"2016-11-03T15:03:42.1139030\",\"idCategory\":3,\"idAdvertisementState\":2,\"idCustomer\":34,\"idAction\":5,\"title\":\"Mepal bestek Rood\",\"description\":\"Zo goed als nieuw Mepal campingbestek, kleur: rood.\nBijna nooit gebruikt, want wij  vonden kamperen uiteindelijk toch niet zo heel erg leuk.\",\"allowBids\":false,\"price\":0,\"street\":\"Grauwe Gans\",\"houseNumber\":43,\"houseNumberAddition\":null,\"city\":\"Uithoorn\",\"postalCode\":\"1423PP\",\"idCountry\":54,\"categoryName\":\"Eetgerei\",\"idCategoryParent\":1,\"idCustomeState\":0,\"customerFullName\":\"Marcel Posdijk\",\"customerFullNameAlternative\":\"Posdijk, Marcel\",\"customerDisplayName\":\"Marcel Facebook\",\"images\":[{\"id\":50,\"idAdvertisement\":22016,\"name\":\"Mepal-Bestek-3delig.5.JPG\",\"isMain\":true,\"sequenceNumber\":1,\"width\":1000,\"height\":875,\"advertisementCode\":\"7f7acb4ee8354c03962ecf52b2f30be3\"}]},{\"id\":22012,\"idCompany\":2,\"code\":\"88289800d9ec458eb5eb96062b6da770\",\"created\":\"2016-11-03T11:24:16.1955950\",\"modified\":\"2016-11-03T15:04:30.1287480\",\"idCategory\":165,\"idAdvertisementState\":2,\"idCustomer\":24,\"idAction\":5,\"title\":\"Dit is een mooie advertentie\",\"description\":\"Jawel! dat is nog eens een mooie! Jawel! dat is nog eens een mooie! Jawel! dat is nog eens een mooie!\",\"allowBids\":false,\"price\":0,\"street\":\"Olifantvlinder\",\"houseNumber\":53,\"houseNumberAddition\":null,\"city\":\"Amersfoort\",\"postalCode\":\"3822AD\",\"idCountry\":54,\"categoryName\":\"Apparatuur\",\"idCategoryParent\":164,\"idCustomeState\":0,\"customerFullName\":\"Kan niet\",\"customerFullNameAlternative\":\"niet, Kan\",\"customerDisplayName\":null,\"images\":[{\"id\":43,\"idAdvertisement\":22012,\"name\":\"14716260_1254849861241033_1828667289693027685_n\",\"isMain\":true,\"sequenceNumber\":1,\"width\":500,\"height\":335,\"advertisementCode\":\"88289800d9ec458eb5eb96062b6da770\"},{\"id\":44,\"idAdvertisement\":22012,\"name\":\"14721641_1249607818431904_6595988710181816775_n\",\"isMain\":false,\"sequenceNumber\":2,\"width\":920,\"height\":607,\"advertisementCode\":\"88289800d9ec458eb5eb96062b6da770\"},{\"id\":45,\"idAdvertisement\":22012,\"name\":\"14725659_1257742530951766_482431401533322119_n\",\"isMain\":false,\"sequenceNumber\":3,\"width\":500,\"height\":273,\"advertisementCode\":\"88289800d9ec458eb5eb96062b6da770\"},{\"id\":46,\"idAdvertisement\":22012,\"name\":\"14729119_1241579585901394_8455185384572839851_n\",\"isMain\":false,\"sequenceNumber\":4,\"width\":500,\"height\":654,\"advertisementCode\":\"88289800d9ec458eb5eb96062b6da770\"}]},{\"id\":22011,\"idCompany\":2,\"code\":\"d4806db33c2a49ef834789cc5541f429\",\"created\":\"2016-10-29T10:10:25.8427480\",\"modified\":\"2016-10-29T10:10:25.8427480\",\"idCategory\":82,\"idAdvertisementState\":2,\"idCustomer\":23,\"idAction\":5,\"title\":\"Stukadoor die een paar uur over heeft\",\"description\":\"Ik kan goed stucwerk leveren, en vraag alleen een bakkie koffie.Materiaal moet je ook zelf regelen.\",\"allowBids\":false,\"price\":0,\"street\":\"Waterbieslaan\",\"houseNumber\":118,\"houseNumberAddition\":null,\"city\":\"Vleuten\",\"postalCode\":\"3452ar\",\"idCountry\":54,\"categoryName\":\"Klussers en Vaklui\",\"idCategoryParent\":78,\"idCustomeState\":0,\"customerFullName\":\"Rob Schoenaker\",\"customerFullNameAlternative\":\"Schoenaker, Rob\",\"customerDisplayName\":\"Rob Schoenaker\",\"images\":[{\"id\":41,\"idAdvertisement\":22011,\"name\":\"IMG_20161012_131158\",\"isMain\":true,\"sequenceNumber\":1,\"width\":2448,\"height\":3264,\"advertisementCode\":\"d4806db33c2a49ef834789cc5541f429\"},{\"id\":42,\"idAdvertisement\":22011,\"name\":\"IMG_20160917_151756\",\"isMain\":false,\"sequenceNumber\":2,\"width\":3264,\"height\":2448,\"advertisementCode\":\"d4806db33c2a49ef834789cc5541f429\"}]},{\"id\":22010,\"idCompany\":2,\"code\":\"dc99a9bd4df04ac3b47876e4ce443fb0\",\"created\":\"2016-10-22T08:32:46.3034050\",\"modified\":\"2016-10-22T08:32:46.3034050\",\"idCategory\":131,\"idAdvertisementState\":2,\"idCustomer\":10,\"idAction\":5,\"title\":\"yg uyg iug iug iug uyg iuyg iuy \",\"description\":\"test boeken guyg uyg iu y yg ugiuyg uyg iug y uyg iuyg yg uyg uyf fg g g ufytf iuyf iuf f if utf f tf ytf yutf uytf uytf uytf uytf ytf uytf ytf yut fuyt fyutf yutf ytf uytf uytf uy \",\"allowBids\":false,\"price\":0,\"street\":\"Enkweg\",\"houseNumber\":10,\"houseNumberAddition\":null,\"city\":\"Vorden\",\"postalCode\":\"7251EW\",\"idCountry\":54,\"categoryName\":\"Boeken\",\"idCategoryParent\":129,\"idCustomeState\":0,\"customerFullName\":\"Piet Bakker\",\"customerFullNameAlternative\":\"Bakker, Piet\",\"customerDisplayName\":\"Pietjuh\",\"images\":[{\"id\":38,\"idAdvertisement\":22010,\"name\":\"bolletje\",\"isMain\":true,\"sequenceNumber\":1,\"width\":772,\"height\":519,\"advertisementCode\":\"dc99a9bd4df04ac3b47876e4ce443fb0\"},{\"id\":39,\"idAdvertisement\":22010,\"name\":\"Boomstra\",\"isMain\":false,\"sequenceNumber\":2,\"width\":716,\"height\":960,\"advertisementCode\":\"dc99a9bd4df04ac3b47876e4ce443fb0\"},{\"id\":40,\"idAdvertisement\":22010,\"name\":\"bye-bye-fashion\",\"isMain\":false,\"sequenceNumber\":3,\"width\":1024,\"height\":768,\"advertisementCode\":\"dc99a9bd4df04ac3b47876e4ce443fb0\"}]},{\"id\":22009,\"idCompany\":2,\"code\":\"333070fc69674588af51ffc634d4f403\",\"created\":\"2016-10-18T10:15:39.9294460\",\"modified\":\"2016-10-18T10:15:39.9294460\",\"idCategory\":5,\"idAdvertisementState\":2,\"idCustomer\":20,\"idAction\":5,\"title\":\"Kunst & kitsch\",\"description\":\"Nieuwe kitch, voor een appel en een ei. 123456789456\n123456789456\n123456789456\n123456789456 hmm hmmm hmmm\",\"allowBids\":false,\"price\":0,\"street\":\"Diemerkade\",\"houseNumber\":2,\"houseNumberAddition\":null,\"city\":\"Diemen\",\"postalCode\":\"1111AA\",\"idCountry\":54,\"categoryName\":\"Kunst\",\"idCategoryParent\":1,\"idCustomeState\":0,\"customerFullName\":\"R P\",\"customerFullNameAlternative\":\"P, R\",\"customerDisplayName\":null,\"images\":[{\"id\":37,\"idAdvertisement\":22009,\"name\":\"DPDLogo\",\"isMain\":true,\"sequenceNumber\":1,\"width\":95,\"height\":48,\"advertisementCode\":\"333070fc69674588af51ffc634d4f403\"}]},{\"id\":22008,\"idCompany\":2,\"code\":\"37c88f637e824eafae77f6ec8cecdfcf\",\"created\":\"2016-10-18T06:51:24.8598450\",\"modified\":\"2016-10-18T06:51:24.8598450\",\"idCategory\":3,\"idAdvertisementState\":2,\"idCustomer\":19,\"idAction\":5,\"title\":\"Gihgujgjjhgjhgjhgjhgjhbjh\",\"description\":\"Mooi hoor dat ding, maar ja, wie weet er niu een enorm verhaal te verzinnen? 100 is best wel lang...\",\"allowBids\":false,\"price\":0,\"street\":\"Waterbieslaan\",\"houseNumber\":118,\"houseNumberAddition\":null,\"city\":\"Vleuten\",\"postalCode\":\"3452AR\",\"idCountry\":54,\"categoryName\":\"Eetgerei\",\"idCategoryParent\":1,\"idCustomeState\":0,\"customerFullName\":\"Rob Schoenaker\",\"customerFullNameAlternative\":\"Schoenaker, Rob\",\"customerDisplayName\":\"Rob Schoenaker\",\"images\":[{\"id\":36,\"idAdvertisement\":22008,\"name\":\"image\",\"isMain\":true,\"sequenceNumber\":1,\"width\":3264,\"height\":2448,\"advertisementCode\":\"37c88f637e824eafae77f6ec8cecdfcf\"}]},{\"id\":22007,\"idCompany\":2,\"code\":\"483b6b64944b446783f35e68b308691e\",\"created\":\"2016-10-18T06:17:34.7745630\",\"modified\":\"2016-10-18T06:17:34.7745630\",\"idCategory\":3,\"idAdvertisementState\":2,\"idCustomer\":8,\"idAction\":5,\"title\":\"Rrrrrrrr fffff\",\"description\":\"Tttttttt gmvg gggihg ghhjgkggjhghj hjgjghghjgg gghjg ghmgj jgjhg jg jg jhghjghjgggghjjgjghjg.Jghjghjghjghjghjghjggggggggghb\",\"allowBids\":false,\"price\":0,\"street\":\"Grauwe Gans\",\"houseNumber\":43,\"houseNumberAddition\":null,\"city\":\"Uithoorn\",\"postalCode\":\"1423PP\",\"idCountry\":54,\"categoryName\":\"Eetgerei\",\"idCategoryParent\":1,\"idCustomeState\":0,\"customerFullName\":\"Marcel Posdijk\",\"customerFullNameAlternative\":\"Posdijk, Marcel\",\"customerDisplayName\":\"Marcel01\",\"images\":[{\"id\":35,\"idAdvertisement\":22007,\"name\":\"IMG_0001.JPG\",\"isMain\":true,\"sequenceNumber\":1,\"width\":2592,\"height\":1936,\"advertisementCode\":\"483b6b64944b446783f35e68b308691e\"}]}],\"responseStatus\":null}";



    public ResponseList<DTO.Advertisement> Get(GetAdvertisements request)
    {

      var temp = JsonSerializer.DeserializeFromString<ResponseList<DTO.Advertisement>>(json);



      var rows = temp.Items.Skip(request.Skip).Take(request.Take).ToList();
      var result = new ResponseList<DTO.Advertisement>
      {
        Items = rows,
        TotalCount = rows.Count,
      };
      return result;
    }
  }
}
